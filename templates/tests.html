<!DOCTYPE html>
<html lang="fr">
<head>
    <meta charset="UTF-8">
    <title>Tests - {{ projet.nom }}</title>
    <link href="https://cdn.jsdelivr.net/npm/bootstrap@5.3.2/dist/css/bootstrap.min.css" rel="stylesheet">
</head>
<body class="bg-light">

<div class="container mt-4">

    <h2 class="mb-4">Tests du module : {{ projet.nom }}</h2>


    <a href="{{ url_for('projet', projet_id=projet.id) }}" class="btn btn-secondary mb-3">
    ← Retour au projet
    </a>

    {% if tests %}
        {% for test in tests %}

        <div class="card mb-3 shadow-sm">
            <div class="card-body">

                <h5 class="card-title">{{ test.nom_test }}</h5>

                <!-- BADGE STATUT -->
                {% if test.statut == "Validé" %}
                    <span class="badge bg-success">Validé</span>
                {% elif test.statut == "KO" %}
                    <span class="badge bg-danger">KO</span>
                {% elif test.statut == "En cours" %}
                    <span class="badge bg-warning text-dark">En cours</span>
                {% else %}
                    <span class="badge bg-secondary">Non testé</span>
                {% endif %}

                <hr>

                <p><strong>Priorité :</strong> {{ test.priorite }}</p>
                <p><strong>Avancement :</strong> {{ test.pourcentage }} %</p>
                <p><strong>Date :</strong> {{ test.date_test.strftime('%d/%m/%Y') if test.date_test else "" }}</p>
                <p><strong>Testeur :</strong> {{ test.testeur }}</p>
                <p><strong>Commentaire :</strong> {{ test.commentaire }}</p>

                <a href="{{ url_for('modifier_test', test_id=test.id) }}" class="btn btn-sm btn-warning">
                    Modifier
                </a>

                <form method="POST" action="{{ url_for('supprimer_test', test_id=test.id) }}" style="display:inline;">
                    <button class="btn btn-sm btn-danger">
                        Supprimer
                    </button>
                </form>

            </div>
        </div>

        {% endfor %}
    {% else %}
        <div class="alert alert-info">
            Aucun test pour ce module.
        </div>
    {% endif %}

</div>

</body>
</html>
